{ "issues": [ { "file": "lollms/app.py", "line": 79, "description": "Use of 'subprocess.run' with user-controlled paths (self.lollms_paths.*) in auto-update block can lead to security issues if paths are not sanitized. Potential command injection if malicious path is set." }, { "file": "lollms/app.py", "line": 132, "description": "References like 'self.lollms.config.rag_vectorizer' and 'self.lollms.config.rag_vectorizer_model' in load_rag_dbs; 'self.lollms' is not defined in this class, possibly leading to AttributeError." }, { "file": "lollms/app.py", "line": 1286, "description": "Duplicate property definitions for start_header_id_template, end_header_id_template, system_message_template, separator_template, start_user_header_id_template, end_user_header_id_template, end_user_message_id_template. (Redefining properties is a code smell and can lead to confusion and maintenance bugs.)" }, { "file": "lollms/app.py", "line": 139, "description": "Global variable 'is_internet_available' is set in a static method. This can cause concurrency issues and unexpected behavior if multiple instances of LollmsApplication are created." }, { "file": "lollms/app.py", "line": 276, "description": "Directly using 'self.config[\"binding_name\"]' and similar dictionary-style access on self.config, which is an object (LOLLMSConfig?), may raise TypeError if LOLLMSConfig does not implement getitem." }, { "file": "lollms/app.py", "line": 1147, "description": "In 'prepare_query', variable 'discussion' is set to None and then conditionally assigned; may lead to UnboundLocalError if not assigned before use, especially if generation_type is 'simple_question'." }, { "file": "lollms/app.py", "line": 1148, "description": "No validation or bounds checking on 'message_index' in 'prepare_query'. If message_index is -1 or out of range, 'messages[message_index]' will raise IndexError." }, { "file": "lollms/app.py", "line": 1312, "description": "Properties like ai_full_header and system_custom_header use self.personality or self.personality.name without checking if personality is None, which could raise AttributeError." } ] }