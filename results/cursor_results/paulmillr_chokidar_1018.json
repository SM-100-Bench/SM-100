{
  "url": "https://github.com/paulmillr/chokidar/pull/1018",
  "identifier": "paulmillr_chokidar_1018",
  "code_blocks": [
    "json\nApply\n[\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"index.js\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a0392,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"Potential\u00a0race\u00a0condition\u00a0in\u00a0add()\u00a0method\u00a0where\u00a0multiple\u00a0async\u00a0operations\u00a0could\u00a0conflict\u00a0when\u00a0adding\u00a0paths\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"index.js\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a0455,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"Unwatch()\u00a0method\u00a0may\u00a0not\u00a0properly\u00a0clean\u00a0up\u00a0all\u00a0watchers\u00a0when\u00a0paths\u00a0contain\u00a0glob\u00a0patterns\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"index.js\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a0486,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"Close()\u00a0method\u00a0may\u00a0not\u00a0properly\u00a0clean\u00a0up\u00a0all\u00a0resources\u00a0if\u00a0called\u00a0during\u00a0async\u00a0operations\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"lib/fsevents-handler.js\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a0306,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"watchCallback\u00a0may\u00a0miss\u00a0events\u00a0during\u00a0high\u00a0system\u00a0load\u00a0due\u00a0to\u00a0lack\u00a0of\u00a0error\u00a0handling\u00a0for\u00a0fsevents\u00a0API\u00a0failures\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"lib/fsevents-handler.js\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a0372,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"_handleFsEventsSymlink\u00a0may\u00a0cause\u00a0infinite\u00a0recursion\u00a0if\u00a0symlink\u00a0points\u00a0to\u00a0a\u00a0parent\u00a0directory\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"lib/fsevents-handler.js\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a0446,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"_addToFsEvents\u00a0may\u00a0leak\u00a0memory\u00a0if\u00a0path\u00a0normalization\u00a0fails\u00a0and\u00a0error\u00a0is\u00a0not\u00a0properly\u00a0handled\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"lib/nodefs-handler.js\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a060,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"Potential\u00a0memory\u00a0leak\u00a0in\u00a0FsWatchInstances\u00a0if\u00a0watcher\u00a0fails\u00a0to\u00a0close\u00a0properly\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"lib/nodefs-handler.js\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a0296,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"NodeFsHandler\u00a0class\u00a0may\u00a0not\u00a0properly\u00a0handle\u00a0EMFILE\u00a0errors\u00a0on\u00a0high\u00a0file\u00a0descriptor\u00a0usage\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"lib/nodefs-handler.js\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a0360,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"Listener\u00a0in\u00a0_handleFile\u00a0may\u00a0cause\u00a0stack\u00a0overflow\u00a0on\u00a0deeply\u00a0nested\u00a0directory\u00a0structures\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"lib/nodefs-handler.js\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a0414,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"_handleSymlink\u00a0may\u00a0not\u00a0properly\u00a0handle\u00a0circular\u00a0symlinks,\u00a0potentially\u00a0causing\u00a0infinite\u00a0loops\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"lib/nodefs-handler.js\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a0448,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"_handleRead\u00a0may\u00a0not\u00a0properly\u00a0handle\u00a0concurrent\u00a0file\u00a0system\u00a0operations,\u00a0leading\u00a0to\u00a0race\u00a0conditions\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"lib/constants.js\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a01,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"Missing\u00a0validation\u00a0for\u00a0platform-specific\u00a0constants\u00a0which\u00a0could\u00a0cause\u00a0issues\u00a0on\u00a0unsupported\u00a0platforms\"\n\u00a0\u00a0}\n]",
    "json\nApply\n[\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"lib/fsevents-handler.js\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a0306,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"Potential\u00a0race\u00a0condition\u00a0in\u00a0watchCallback\u00a0where\u00a0fsw.closed\u00a0is\u00a0checked\u00a0twice\u00a0in\u00a0succession\u00a0without\u00a0any\u00a0operations\u00a0in\u00a0between.\u00a0This\u00a0could\u00a0lead\u00a0to\u00a0inconsistent\u00a0state\u00a0if\u00a0the\u00a0watcher\u00a0is\u00a0closed\u00a0between\u00a0the\u00a0two\u00a0checks.\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"lib/fsevents-handler.js\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a0372,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"In\u00a0_handleFsEventsSymlink,\u00a0there's\u00a0no\u00a0error\u00a0handling\u00a0for\u00a0the\u00a0case\u00a0where\u00a0realpath\u00a0resolution\u00a0fails,\u00a0which\u00a0could\u00a0lead\u00a0to\u00a0unhandled\u00a0promise\u00a0rejections.\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"lib/fsevents-handler.js\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a0446,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"In\u00a0initWatch,\u00a0there's\u00a0no\u00a0validation\u00a0of\u00a0the\u00a0wh\u00a0(watch\u00a0handler)\u00a0parameter\u00a0before\u00a0using\u00a0it,\u00a0which\u00a0could\u00a0lead\u00a0to\u00a0undefined\u00a0behavior\u00a0if\u00a0an\u00a0invalid\u00a0handler\u00a0is\u00a0passed.\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"lib/nodefs-handler.js\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a060,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"In\u00a0createFsWatchInstance,\u00a0the\u00a0error\u00a0handler\u00a0is\u00a0called\u00a0but\u00a0the\u00a0function\u00a0continues\u00a0execution,\u00a0potentially\u00a0leading\u00a0to\u00a0undefined\u00a0behavior\u00a0when\u00a0trying\u00a0to\u00a0use\u00a0the\u00a0watcher\u00a0after\u00a0an\u00a0error.\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"lib/nodefs-handler.js\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a0120,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"In\u00a0setFsWatchListener,\u00a0there's\u00a0a\u00a0potential\u00a0memory\u00a0leak\u00a0if\u00a0watcher\u00a0creation\u00a0fails\u00a0but\u00a0the\u00a0error\u00a0handler\u00a0is\u00a0still\u00a0added\u00a0to\u00a0the\u00a0container.\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"lib/nodefs-handler.js\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a0160,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"In\u00a0the\u00a0cleanup\u00a0function\u00a0of\u00a0setFsWatchListener,\u00a0the\u00a0watcher.close()\u00a0is\u00a0called\u00a0even\u00a0when\u00a0cont.watcherUnusable\u00a0is\u00a0true,\u00a0which\u00a0could\u00a0lead\u00a0to\u00a0errors\u00a0on\u00a0already\u00a0closed\u00a0watchers.\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"lib/nodefs-handler.js\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a0296,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"In\u00a0the\u00a0NodeFsHandler\u00a0class,\u00a0there's\u00a0no\u00a0cleanup\u00a0of\u00a0FsWatchFileInstances\u00a0when\u00a0the\u00a0handler\u00a0is\u00a0destroyed,\u00a0which\u00a0could\u00a0lead\u00a0to\u00a0memory\u00a0leaks.\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"lib/nodefs-handler.js\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a0360,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"In\u00a0the\u00a0listener\u00a0function\u00a0of\u00a0_handleFile,\u00a0there's\u00a0no\u00a0error\u00a0handling\u00a0for\u00a0the\u00a0case\u00a0where\u00a0newStats\u00a0is\u00a0undefined,\u00a0which\u00a0could\u00a0lead\u00a0to\u00a0runtime\u00a0errors.\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"lib/nodefs-handler.js\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a0414,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"In\u00a0_handleSymlink,\u00a0there's\u00a0no\u00a0validation\u00a0of\u00a0the\u00a0entry\u00a0parameter\u00a0before\u00a0using\u00a0it,\u00a0which\u00a0could\u00a0lead\u00a0to\u00a0undefined\u00a0behavior\u00a0if\u00a0an\u00a0invalid\u00a0entry\u00a0is\u00a0passed.\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"lib/nodefs-handler.js\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a0448,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"In\u00a0_handleRead,\u00a0there's\u00a0no\u00a0error\u00a0handling\u00a0for\u00a0the\u00a0case\u00a0where\u00a0directory\u00a0reading\u00a0fails,\u00a0which\u00a0could\u00a0lead\u00a0to\u00a0unhandled\u00a0promise\u00a0rejections.\"\n\u00a0\u00a0}\n]",
    "json\nApply\n[\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"example.js\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a03,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"Global\u00a0variable\u00a0'watcher'\u00a0is\u00a0exposed\u00a0without\u00a0cleanup,\u00a0which\u00a0could\u00a0lead\u00a0to\u00a0memory\u00a0leaks\u00a0in\u00a0long-running\u00a0applications\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"example.js\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a04,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"No\u00a0error\u00a0handling\u00a0for\u00a0the\u00a0watch\u00a0operation,\u00a0which\u00a0could\u00a0crash\u00a0the\u00a0application\u00a0if\u00a0the\u00a0directory\u00a0doesn't\u00a0exist\u00a0or\u00a0is\u00a0inaccessible\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"test.js\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a01792,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"Potential\u00a0race\u00a0condition\u00a0in\u00a0_waitFor\u00a0function\u00a0-\u00a0the\u00a0finish()\u00a0function\u00a0could\u00a0be\u00a0called\u00a0multiple\u00a0times\u00a0due\u00a0to\u00a0both\u00a0interval\u00a0and\u00a0timeout\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"test.js\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a01793,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"No\u00a0error\u00a0handling\u00a0in\u00a0isSpyReady\u00a0function\u00a0for\u00a0invalid\u00a0spy\u00a0objects,\u00a0could\u00a0lead\u00a0to\u00a0undefined\u00a0behavior\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"test.js\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a01772,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"simpleCb\u00a0function\u00a0throws\u00a0errors\u00a0directly\u00a0without\u00a0proper\u00a0error\u00a0handling,\u00a0which\u00a0could\u00a0crash\u00a0the\u00a0test\u00a0process\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"test.js\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a01769,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"w\u00a0function\u00a0lacks\u00a0error\u00a0handling\u00a0for\u00a0file\u00a0operations,\u00a0could\u00a0lead\u00a0to\u00a0silent\u00a0failures\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"types/test.ts\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a03,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"No\u00a0type\u00a0checking\u00a0for\u00a0the\u00a0'ignored'\u00a0pattern,\u00a0could\u00a0lead\u00a0to\u00a0runtime\u00a0errors\u00a0if\u00a0invalid\u00a0regex\u00a0is\u00a0provided\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"types/test.ts\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a05,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"No\u00a0error\u00a0handling\u00a0for\u00a0the\u00a0initial\u00a0watch\u00a0operation,\u00a0could\u00a0crash\u00a0if\u00a0the\u00a0path\u00a0doesn't\u00a0exist\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"types/test.ts\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a08,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"Event\u00a0handlers\u00a0don't\u00a0have\u00a0proper\u00a0error\u00a0handling,\u00a0could\u00a0lead\u00a0to\u00a0uncaught\u00a0exceptions\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"types/test.ts\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a035,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"No\u00a0type\u00a0checking\u00a0for\u00a0the\u00a0'details'\u00a0parameter\u00a0in\u00a0raw\u00a0event\u00a0handler,\u00a0could\u00a0lead\u00a0to\u00a0runtime\u00a0errors\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"types/test.ts\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a045,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"No\u00a0null\u00a0check\u00a0before\u00a0accessing\u00a0stats.size,\u00a0could\u00a0lead\u00a0to\u00a0runtime\u00a0errors\u00a0if\u00a0stats\u00a0is\u00a0undefined\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"types/test.ts\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a048,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"No\u00a0error\u00a0handling\u00a0for\u00a0watcher.add\u00a0operations,\u00a0could\u00a0fail\u00a0silently\u00a0if\u00a0files\u00a0don't\u00a0exist\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"types/test.ts\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a051,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"No\u00a0error\u00a0handling\u00a0for\u00a0watcher.unwatch\u00a0operation,\u00a0could\u00a0fail\u00a0silently\"\n\u00a0\u00a0}\n]"
  ],
  "timestamp": "2025-05-01 14:33:25"
}