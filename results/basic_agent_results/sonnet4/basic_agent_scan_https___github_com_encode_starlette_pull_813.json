{"repo_id": "encode_starlette_813", "bugs": [{"description": "Missing comma separator in __repr__ method. When options exist, there should be a comma between the class name and options string. Current code produces 'Middleware(SomeClass{key=value})' instead of 'Middleware(SomeClass, {key=value})'.", "file": "starlette/middleware/__init__.py", "line": 17}, {"description": "Using deprecated asyncio.get_event_loop() which can cause issues in some contexts and is deprecated in Python 3.10+. Should use asyncio.get_running_loop() instead to get the currently running event loop.", "file": "starlette/middleware/base.py", "line": 29}, {"description": "Case sensitivity bug in header access. The code uses request_headers[\"Origin\"] with capital 'O' but should use request_headers[\"origin\"] with lowercase 'o' to match the lowercase key used elsewhere in the same file (line 73). This will cause a KeyError when the Origin header is present.", "file": "starlette/middleware/cors.py", "line": 152}, {"description": "Invalid HTML entity in format_line method. The code uses '&nbsp' but it should be '&nbsp;' (with semicolon) to be a valid HTML non-breaking space entity. This will result in malformed HTML in error pages.", "file": "starlette/middleware/errors.py", "line": 184}, {"description": "Incorrect WSGI environ setup. According to WSGI specification (PEP 3333), 'wsgi.errors' should point to sys.stderr for error output, not sys.stdout. This violates the WSGI standard and could cause error messages to be sent to the wrong stream.", "file": "starlette/middleware/wsgi.py", "line": 23}, {"description": "Incorrect exception re-raising logic. The code tries to call with_traceback on self.exc_info[0] (exception type) but should call it on an exception instance. This will cause AttributeError when trying to re-raise exceptions. Should be: raise self.exc_info[1].with_traceback(self.exc_info[2])", "file": "starlette/middleware/wsgi.py", "line": 93}], "updated_files": {}}