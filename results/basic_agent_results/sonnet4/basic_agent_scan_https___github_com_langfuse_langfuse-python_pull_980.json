{"repo_id": "langfuse_langfuse-python_980", "bugs": [{"description": "In the deterministic_sample method, the normalization calculation uses an incorrect divisor. The code divides hash_int by 0xFFFFFFFF (2^32 - 1), but this can result in a value of exactly 1.0 when hash_int equals 0xFFFFFFFF. This violates the documented range [0, 1) and causes incorrect sampling behavior when the hash equals the maximum value. The divisor should be 0x100000000 (2^32) to ensure the range is truly [0, 1).", "file": "langfuse/Sampler.py", "line": 57}, {"description": "In the AzureOpenAI model extraction logic, there's a bug where `deployment_version` is assigned from `serialized.get('kwargs').get('openai_api_version')` but the code actually assigns it from `serialized.get('kwargs').get('deployment_version')` which doesn't exist. Additionally, `deployment_version` is used in string concatenation on line 57 but may be None, which would cause a TypeError when concatenating with a string.", "file": "langfuse/extract_model.py", "line": 53}, {"description": "In the AzureOpenAI model extraction logic, there are multiple bugs: 1) On line 47, accessing `serialized.get('id')[-1]` will raise an IndexError if the 'id' key doesn't exist or if the value is an empty list. 2) On line 48, calling `kwargs.get('invocation_params').get('model_name')` will raise an AttributeError if 'invocation_params' is None. 3) Similar issue on lines 52 and 55 where `serialized.get('kwargs').get(...)` will raise AttributeError if 'kwargs' is None.", "file": "langfuse/extract_model.py", "line": 47}], "updated_files": {}}