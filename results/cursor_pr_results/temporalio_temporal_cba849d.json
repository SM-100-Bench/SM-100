{
  "url": "https://github.com/temporalio/temporal/pull/2015",
  "identifier": "temporalio_temporal_cba849d",
  "code_blocks": [
    "json\nApply\n[\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"common/persistence/sql/sqlplugin/postgres/queue.go\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a038,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"templateGetLastMessageIDQuery\u00a0uses\u00a0'message_id\u00a0>=\u00a0(SELECT\u00a0...\u00a0ORDER\u00a0BY\u00a0message_id\u00a0DESC\u00a0LIMIT\u00a01)'\u00a0which\u00a0may\u00a0return\u00a0multiple\u00a0rows\u00a0if\u00a0there\u00a0are\u00a0multiple\u00a0queue_types\u00a0with\u00a0the\u00a0same\u00a0message_id.\u00a0This\u00a0could\u00a0cause\u00a0a\u00a0SQL\u00a0error\u00a0or\u00a0incorrect\u00a0locking\u00a0behavior.\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"common/persistence/sql/sqlplugin/postgres/queue.go\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a038,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"templateGetLastMessageIDQuery\u00a0does\u00a0not\u00a0filter\u00a0the\u00a0outer\u00a0WHERE\u00a0clause\u00a0by\u00a0queue_type,\u00a0which\u00a0may\u00a0result\u00a0in\u00a0locking\u00a0or\u00a0returning\u00a0the\u00a0wrong\u00a0message_id\u00a0if\u00a0message_ids\u00a0overlap\u00a0between\u00a0queue\u00a0types.\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"common/persistence/sql/sqlplugin/postgres/queue.go\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a061,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"InsertAckLevel\u00a0always\u00a0overwrites\u00a0the\u00a0entire\u00a0queue_metadata\u00a0row\u00a0for\u00a0a\u00a0queue_type,\u00a0which\u00a0may\u00a0cause\u00a0loss\u00a0of\u00a0ack\u00a0levels\u00a0for\u00a0other\u00a0clusters\u00a0if\u00a0multiple\u00a0clusters\u00a0are\u00a0writing\u00a0concurrently.\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"common/persistence/sql/sqlplugin/postgres/queue.go\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a070,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"UpdateAckLevels\u00a0overwrites\u00a0the\u00a0entire\u00a0data\u00a0field\u00a0in\u00a0queue_metadata\u00a0for\u00a0a\u00a0queue_type,\u00a0which\u00a0may\u00a0cause\u00a0race\u00a0conditions\u00a0and\u00a0lost\u00a0updates\u00a0if\u00a0multiple\u00a0writers\u00a0update\u00a0different\u00a0clusters'\u00a0ack\u00a0levels\u00a0concurrently.\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"common/persistence/sql/sqlplugin/postgres/typeconv.go\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a036,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"ToPostgresDateTime\u00a0creates\u00a0a\u00a0new\u00a0time.Time\u00a0with\u00a0time.Unix(0,\u00a0nano)\u00a0if\u00a0the\u00a0zone\u00a0does\u00a0not\u00a0match,\u00a0but\u00a0this\u00a0will\u00a0always\u00a0use\u00a0UTC,\u00a0potentially\u00a0losing\u00a0the\u00a0original\u00a0timezone\u00a0information\u00a0and\u00a0causing\u00a0subtle\u00a0bugs\u00a0with\u00a0time\u00a0comparisons.\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"config/development_postgres.yaml\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a013,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"Database\u00a0credentials\u00a0(user:\u00a0'postgres',\u00a0password:\u00a0'cadence')\u00a0are\u00a0hardcoded\u00a0in\u00a0the\u00a0configuration\u00a0file.\u00a0This\u00a0is\u00a0insecure\u00a0for\u00a0production\u00a0environments.\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"config/development_postgres.yaml\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a074,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"File\u00a0and\u00a0directory\u00a0modes\u00a0for\u00a0archival\u00a0history\u00a0are\u00a0set\u00a0to\u00a0'0666'\u00a0and\u00a0'0766',\u00a0which\u00a0are\u00a0overly\u00a0permissive\u00a0and\u00a0may\u00a0allow\u00a0unauthorized\u00a0access\u00a0to\u00a0sensitive\u00a0data.\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"docker/buildkite/docker-compose-local.yml\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a028,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"Postgres\u00a0service\u00a0exposes\u00a0port\u00a05432\u00a0to\u00a0all\u00a0interfaces\u00a0without\u00a0any\u00a0network\u00a0restrictions.\u00a0This\u00a0is\u00a0insecure\u00a0for\u00a0production\u00a0use.\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"docker/buildkite/docker-compose.yml\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a023,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"Postgres\u00a0service\u00a0exposes\u00a0port\u00a05432\u00a0to\u00a0all\u00a0interfaces\u00a0without\u00a0any\u00a0network\u00a0restrictions.\u00a0This\u00a0is\u00a0insecure\u00a0for\u00a0production\u00a0use.\"\n\u00a0\u00a0},\n\u00a0\u00a0{\n\u00a0\u00a0\u00a0\u00a0\"file\":\u00a0\"go.mod\",\n\u00a0\u00a0\u00a0\u00a0\"line\":\u00a085,\n\u00a0\u00a0\u00a0\u00a0\"description\":\u00a0\"Replaces\u00a0github.com/jmoiron/sqlx\u00a0with\u00a0github.com/longquanzheng/sqlx,\u00a0which\u00a0is\u00a0a\u00a0fork.\u00a0Using\u00a0a\u00a0non-standard\u00a0fork\u00a0for\u00a0a\u00a0critical\u00a0dependency\u00a0can\u00a0introduce\u00a0supply\u00a0chain\u00a0risks\u00a0if\u00a0the\u00a0fork\u00a0is\u00a0not\u00a0well\u00a0maintained\u00a0or\u00a0audited.\"\n\u00a0\u00a0}\n]"
  ],
  "timestamp": "2025-05-26 16:18:29"
}